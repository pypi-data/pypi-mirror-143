(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2229],{89075:(e,t,r)=>{"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(67294),a=o(i),s=o(r(37483));function o(e){return e&&e.__esModule?e:{default:e}}var l={from:s.default.number,to:s.default.number.isRequired,speed:s.default.number.isRequired,delay:s.default.number,onComplete:s.default.func,digits:s.default.number,className:s.default.string,tagName:s.default.string,children:s.default.func,easing:s.default.func},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=e.from;return r.state={counter:n},r.start=r.start.bind(r),r.clear=r.clear.bind(r),r.next=r.next.bind(r),r.updateCounter=r.updateCounter.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.start()}),5e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,r=t.from,n=t.to;e.to===n&&e.from===r||this.start(e)}},{key:"componentWillUnmount",value:function(){this.clear()}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.clear();var r=t.from;this.setState({counter:r},(function(){var t=e.props,r=t.speed,n=t.delay,i=Date.now();e.endDate=i+r,e.scheduleNextUpdate(i,n),e.raf=requestAnimationFrame(e.next)}))}},{key:"next",value:function(){var e=Date.now(),t=this.props,r=t.speed,n=t.onComplete,i=t.delay;if(e>=this.nextUpdate){var a=Math.max(0,Math.min(1,1-(this.endDate-e)/r));this.updateCounter(a),this.scheduleNextUpdate(e,i)}e<this.endDate?this.raf=requestAnimationFrame(this.next):n&&n()}},{key:"scheduleNextUpdate",value:function(e,t){this.nextUpdate=Math.min(e+t,this.endDate)}},{key:"updateCounter",value:function(e){var t=this.props,r=t.from,n=r+(t.to-r)*(0,t.easing)(e);this.setState({counter:n})}},{key:"clear",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.digits,n=e.tagName,i=e.children,s=this.state.counter.toFixed(r);return i?i(s):a.default.createElement(n,{className:t},s)}}]),t}(i.PureComponent);c.propTypes=l,c.defaultProps={from:0,delay:100,digits:0,tagName:"span",easing:function(e){return e}},t.Z=c},38500:(e,t,r)=>{"use strict";var n=r(57955);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,a,s){if(s!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return r.PropTypes=r,r}},37483:(e,t,r)=>{e.exports=r(38500)()},57955:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},57596:(e,t,r)=>{"use strict";r.d(t,{E8:()=>Z,CW:()=>h.Z,kI:()=>n,A5:()=>i.Z,Gz:()=>d.Z,Ys:()=>p.Z,$5:()=>f.Z,Dg:()=>m.Z,XF:()=>y.Z,gE:()=>a.Z,yE:()=>g.Z,eL:()=>o.Z,zR:()=>u.Z,UM:()=>b.Z,Bs:()=>v.Z,T8:()=>c.Z,B_:()=>s.Z,Qg:()=>x,j3:()=>l.Z});var n=r(28062),i=r(97466),a=r(15226),s=r(81545),o=r(58586),l=r(45511),c=r(2995),u=r(98195),h=r(27965),d=r(86698),p=r(69224),f=r(77781),m=r(64236),y=r(65445),g=r(36361),b=r(132),v=r(31225);const w=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/;function x(e,t=186){let r=0,n=0,i=0;if(e.length>7){const t=w.exec(e);if(!t)throw new Error(`Invalid color: ${e}`);r=parseInt(t[1],10),n=parseInt(t[2],10),i=parseInt(t[3],10)}else{let t=e;if(t.startsWith("#")&&(t=t.substring(1)),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]].join("")),6!==t.length)throw new Error(`Invalid color: ${e}`);r=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16)}return.299*r+.587*n+.114*i>t?"#000":"#FFF"}const Z="#00A699"},8608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(62761);function i(e,t,r){let n=e,i=t(n);for(;!r(i);)n-=1,i=t(n);return n}function a(e){const{idealFontSize:t,maxWidth:r,maxHeight:a,style:s,...o}=e;let l;if(null!=t)l=t;else{if(null==a)throw new Error("You must specify at least one of maxHeight or idealFontSize");l=Math.floor(a)}function c(e){return(0,n.Z)({...o,style:{...s,fontSize:`${e}px`}})}return null!=r&&(l=i(l,c,(e=>e.width<=r))),null!=a&&(l=i(l,c,(e=>e.height<=a))),l}},62761:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(10660),i=r(61888),a=r(91572);function s(e,t){const{text:r,className:s,style:o,container:l}=e;if(0===r.length)return{height:0,width:0};const c=a.Y.createInContainer(l),u=a.S.createInContainer(c);(0,n.Z)(u,{className:s,style:o,text:r});const h=(0,i.Z)(u,t);return setTimeout((()=>{a.S.removeFromContainer(c),a.Y.removeFromContainer(l)}),500),h}},4470:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});class n{constructor(e){this.activeNodes=new Map,this.factoryFn=void 0,this.factoryFn=e}createInContainer(e=document.body){if(this.activeNodes.has(e)){const t=this.activeNodes.get(e);return t.counter+=1,t.node}const t=this.factoryFn();return e.append(t),this.activeNodes.set(e,{counter:1,node:t}),t}removeFromContainer(e=document.body){if(this.activeNodes.has(e)){const t=this.activeNodes.get(e);t.counter-=1,0===t.counter&&(e.removeChild(t.node),this.activeNodes.delete(e))}}}},48691:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});const n="http://www.w3.org/2000/svg"},24313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(48691);function i(){const e=document.createElementNS(n.h,"svg");return e.style.position="absolute",e.style.top="-100%",e.style.left="-100%",e.style.width="0",e.style.height="0",e.style.opacity="0",e.style.pointerEvents="none",e}},48e3:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(48691);function i(){return document.createElementNS(n.h,"text")}},91572:(e,t,r)=>{"use strict";r.d(t,{Y:()=>s,S:()=>o});var n=r(4470),i=r(24313),a=r(48e3);const s=new n.Z(i.Z),o=new n.Z(a.Z)},61888:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n={height:20,width:100};function i(e,t=n){const{width:r,height:i}=e.getBBox?e.getBBox():t;return{height:Math.ceil(i),width:Math.ceil(r)}}},10660:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const n=["font","fontWeight","fontStyle","fontSize","fontFamily","letterSpacing"];function i(e,{className:t,style:r={},text:i}={}){const a=e;return a.textContent!==i&&(a.textContent=void 0===i?null:i),a.getAttribute("class")!==t&&a.setAttribute("class",null!=t?t:""),a.style.removeProperty("font"),a.style.removeProperty("font-weight"),a.style.removeProperty("font-style"),a.style.removeProperty("font-size"),a.style.removeProperty("font-family"),a.style.removeProperty("letter-spacing"),n.filter((e=>void 0!==r[e]&&null!==r[e])).forEach((e=>{a.style[e]=`${r[e]}`})),a}},32229:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r(67294),i=r(67190),a=r(61988),s=r(8608),o=r(40962),l=r(57596),c=r(51995),u=r(89075),h=r(63475),d=r(14492);const p=(0,i.JB)(),f=.3;class m extends n.PureComponent{getClassName(){const{className:e,showTrendLine:t,bigNumberFallback:r}=this.props,n=`superset-legacy-chart-big-number ${e} ${r?"is-fallback-value":""}`;return t?n:`${n} no-trendline`}createTemporaryContainer(){const e=document.createElement("div");return e.className=this.getClassName(),e.style.position="absolute",e.style.opacity="0",e}renderFallbackWarning(){const{bigNumberFallback:e,formatTime:t,showTimestamp:r}=this.props;return!e||r?null:(0,d.tZ)("span",{className:"alert alert-warning",role:"alert",title:(0,a.t)("Last available value seen on %s",t(e[0]))},(0,a.t)("Not up to date"))}renderKicker(e){const{timestamp:t,showTimestamp:r,formatTime:n,width:i}=this.props;if(!r)return null;const a=null===t?"":n(t),o=this.createTemporaryContainer();document.body.append(o);const l=(0,s.Z)({text:a,maxWidth:i,maxHeight:e,className:"kicker",container:o});return o.remove(),(0,d.tZ)("div",{className:"kicker",style:{fontSize:l,height:e}},a)}renderHeader(e){const{bigNumber:t,headerFormatter:r,width:n}=this.props,i=null===t?(0,a.t)("No data"):r(t),o=this.createTemporaryContainer();document.body.append(o);const l=(0,s.Z)({text:i,maxWidth:n,maxHeight:e,className:"header-line",container:o});return o.remove(),(0,d.tZ)("div",{className:"header-line",style:{fontSize:l,height:e}},(0,d.tZ)(u.Z,{from:0,to:parseInt(i.replace(/,/g,""),10),speed:3e3,delay:100}))}renderSubheader(e){const{bigNumber:t,subheader:r,width:n,bigNumberFallback:i}=this.props;let o=0;const l=(0,a.t)("No data after filtering or data is NULL for the latest time record"),c=(0,a.t)("Try applying different filters or ensuring your datasource has data");let u=r;if(null===t&&(u=i?c:l),u){const t=this.createTemporaryContainer();return document.body.append(t),o=(0,s.Z)({text:u,maxWidth:n,maxHeight:e,className:"subheader-line",container:t}),t.remove(),(0,d.tZ)("div",{className:"subheader-line",style:{fontSize:o,height:e}},u)}return null}renderTrendline(e){const{width:t,trendLineData:r,echartOptions:n}=this.props;return null!=r&&r.some((e=>null!==e[1]))?(0,d.tZ)(h.Z,{width:Math.floor(t),height:e,echartOptions:n}):null}render(){const{showTrendLine:e,height:t,kickerFontSize:r,headerFontSize:n,subheaderFontSize:i}=this.props,a=this.getClassName();if(e){const e=Math.floor(f*t),s=t-e;return(0,d.tZ)("div",{className:a},(0,d.tZ)("div",{className:"text-container",style:{height:s}},this.renderFallbackWarning(),this.renderKicker(Math.ceil(.7*r*t)),this.renderHeader(Math.ceil(.7*n*t)),this.renderSubheader(Math.ceil(.7*i*t))),this.renderTrendline(e))}return(0,d.tZ)("div",{className:a,style:{height:t}},this.renderFallbackWarning(),this.renderKicker(r*t),this.renderHeader(Math.ceil(n*t)),this.renderSubheader(Math.ceil(i*t)))}}m.defaultProps={className:"",headerFormatter:p,formatTime:o.Z,headerFontSize:.3,kickerFontSize:.1,mainColor:l.E8,showTimestamp:!1,showTrendLine:!1,startYAxisAtZero:!0,subheader:"",subheaderFontSize:.125,timeRangeFixed:!1};const y=(0,c.iK)(m)`
  font-family: ${({theme:e})=>e.typography.families.sansSerif};
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;

  &.no-trendline .subheader-line {
    padding-bottom: 0.3em;
  }

  .text-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    .alert {
      font-size: ${({theme:e})=>e.typography.sizes.s};
      margin: -0.5em 0 0.4em;
      line-height: 1;
      padding: 2px 4px 3px;
      border-radius: 3px;
    }
  }

  .kicker {
    font-weight: ${({theme:e})=>e.typography.weights.light};
    line-height: 1em;
    padding-bottom: 2em;
  }

  .header-line {
    font-weight: ${({theme:e})=>e.typography.weights.normal};
    position: relative;
    line-height: 1em;
    span {
      position: absolute;
      bottom: 0;
    }
  }

  .subheader-line {
    font-weight: ${({theme:e})=>e.typography.weights.light};
    line-height: 1em;
    padding-bottom: 0;
  }

  &.is-fallback-value {
    .kicker,
    .header-line,
    .subheader-line {
      opacity: 0.5;
    }
  }

  .superset-data-ui-tooltip {
    z-index: 1000;
    background: #000;
  }
`},63475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),i=r(51995),a=r(77539),s=r(14492);const o=i.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function l({width:e,height:t,echartOptions:r,eventHandlers:i,zrEventHandlers:l,selectedValues:c={}},u){const h=(0,n.useRef)(null),d=(0,n.useRef)(),p=(0,n.useMemo)((()=>Object.keys(c)||[]),[c]),f=(0,n.useRef)([]);return(0,n.useImperativeHandle)(u,(()=>({getEchartInstance:()=>d.current}))),(0,n.useEffect)((()=>{h.current&&(d.current||(d.current=(0,a.S1)(h.current)),Object.entries(i||{}).forEach((([e,t])=>{var r,n;null==(r=d.current)||r.off(e),null==(n=d.current)||n.on(e,t)})),Object.entries(l||{}).forEach((([e,t])=>{var r,n;null==(r=d.current)||r.getZr().off(e),null==(n=d.current)||n.getZr().on(e,t)})),d.current.setOption(r,!0))}),[r,i,l]),(0,n.useEffect)((()=>{d.current&&(d.current.dispatchAction({type:"downplay",dataIndex:f.current.filter((e=>!p.includes(e)))}),p.length&&d.current.dispatchAction({type:"highlight",dataIndex:p}),f.current=p)}),[p]),(0,n.useEffect)((()=>{d.current&&d.current.resize({width:e,height:t})}),[e,t]),(0,s.tZ)(o,{ref:h,height:t,width:e})}const c=(0,n.forwardRef)(l)}}]);