"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[4443],{18239:(e,t,r)=>{r.d(t,{Z:()=>W});var a=r(37703),n=r(14890),o=r(52256),i=r(97381),s=r(5872),l=r.n(s),d=r(45697),c=r.n(d),u=r(67294),h=r(61988),p=r(51995),m=r(68492),g=r(91877),f=r(93185),v=r(9531),y=r(35932),b=r(38703),S=r(94301),T=r(57902),Z=r(3741),C=r(27600),D=r(23525),E=r(18446),R=r.n(E),_=r(42933),w=r.n(_),x=r(88274),F=r(16355),A=r(11965);const P={annotationData:c().object,actions:c().object,chartId:c().number.isRequired,datasource:c().object,initialValues:c().object,formData:c().object.isRequired,labelColors:c().object,height:c().number,width:c().number,setControlValue:c().func,vizType:c().string.isRequired,triggerRender:c().bool,chartAlert:c().string,chartStatus:c().string,queriesResponse:c().arrayOf(c().object),triggerQuery:c().bool,refreshOverlayVisible:c().bool,addFilter:c().func,setDataMask:c().func,onFilterMenuOpen:c().func,onFilterMenuClose:c().func,ownState:c().object,source:c().oneOf(["dashboard","explore"])},O={},k={addFilter:()=>O,onFilterMenuOpen:()=>O,onFilterMenuClose:()=>O,initialValues:O,setControlValue(){},triggerRender:!1};class I extends u.Component{constructor(e){super(e),this.hasQueryResponseChange=!1,this.handleAddFilter=this.handleAddFilter.bind(this),this.handleRenderSuccess=this.handleRenderSuccess.bind(this),this.handleRenderFailure=this.handleRenderFailure.bind(this),this.handleSetControlValue=this.handleSetControlValue.bind(this),this.hooks={onAddFilter:this.handleAddFilter,onError:this.handleRenderFailure,setControlValue:this.handleSetControlValue,onFilterMenuOpen:this.props.onFilterMenuOpen,onFilterMenuClose:this.props.onFilterMenuClose,setDataMask:e=>{var t;null==(t=this.props.actions)||t.updateDataMask(this.props.chartId,e)}}}shouldComponentUpdate(e){var t,r;return!(!(e.queriesResponse&&["success","rendered"].indexOf(e.chartStatus)>-1)||null!=(t=e.queriesResponse)&&null!=(r=t[0])&&r.error||e.refreshOverlayVisible)&&(this.hasQueryResponseChange=e.queriesResponse!==this.props.queriesResponse,this.hasQueryResponseChange||!R()(e.datasource,this.props.datasource)||e.annotationData!==this.props.annotationData||e.ownState!==this.props.ownState||e.filterState!==this.props.filterState||e.height!==this.props.height||e.width!==this.props.width||e.triggerRender||e.labelColors!==this.props.labelColors||e.formData.color_scheme!==this.props.formData.color_scheme||e.cacheBusterProp!==this.props.cacheBusterProp)}handleAddFilter(e,t,r=!0,a=!0){this.props.addFilter(e,t,r,a)}handleRenderSuccess(){const{actions:e,chartStatus:t,chartId:r,vizType:a}=this.props;["loading","rendered"].indexOf(t)<0&&e.chartRenderingSucceeded(r),this.hasQueryResponseChange&&e.logEvent(Z.aD,{slice_id:r,viz_type:a,start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:Z.Yd.getTimestamp()-this.renderStartTime})}handleRenderFailure(e,t){const{actions:r,chartId:a}=this.props;m.Z.warn(e),r.chartRenderingFailed(e.toString(),a,t?t.componentStack:null),this.hasQueryResponseChange&&r.logEvent(Z.aD,{slice_id:a,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:Z.Yd.getTimestamp()-this.renderStartTime})}handleSetControlValue(...e){const{setControlValue:t}=this.props;t&&t(...e)}render(){const{chartAlert:e,chartStatus:t,vizType:r,chartId:a,refreshOverlayVisible:n}=this.props;if(n||"loading"===t||e||null===t)return null;this.renderStartTime=Z.Yd.getTimestamp();const{width:o,height:i,datasource:s,annotationData:l,initialValues:d,ownState:c,filterState:u,formData:p,queriesResponse:m}=this.props,g=w()(r),f="table"===r?`superset-chart-${g}`:g;let v;const y=(0,h.t)("No results were returned for this query"),b="explore"===this.props.source?(0,h.t)("Make sure that the controls are configured properly and the datasource contains data for the selected time range"):void 0,T="chart.svg";return v=o>300&&i>220?(0,A.tZ)(S.XJ,{title:y,description:b,image:T}):(0,A.tZ)(S.Tc,{title:y,image:T}),(0,A.tZ)(x.Z,{disableErrorBoundary:!0,key:`${a}`,id:`chart-id-${a}`,className:f,chartType:r,width:o,height:i,annotationData:l,datasource:s,initialValues:d,formData:p,ownState:c,filterState:u,hooks:this.hooks,behaviors:[F.cg.INTERACTIVE_CHART],queriesData:m,onRenderSuccess:this.handleRenderSuccess,onRenderFailure:this.handleRenderFailure,noResults:v})}}I.propTypes=P,I.defaultProps=k;const M=I;var N=r(67994),U=r(72875);const $=({chartId:e,error:t,...r})=>{const{result:a}=(0,N.hb)(e),n=t&&{...t,extra:{...t.extra,owners:a}};return(0,A.tZ)(U.Z,l()({},r,{error:n}))},q={annotationData:c().object,actions:c().object,chartId:c().number.isRequired,datasource:c().object,dashboardId:c().number,initialValues:c().object,formData:c().object.isRequired,labelColors:c().object,width:c().number,height:c().number,setControlValue:c().func,timeout:c().number,vizType:c().string.isRequired,triggerRender:c().bool,force:c().bool,isFiltersInitialized:c().bool,isDeactivatedViz:c().bool,chartAlert:c().string,chartStatus:c().string,chartStackTrace:c().string,queriesResponse:c().arrayOf(c().object),triggerQuery:c().bool,refreshOverlayVisible:c().bool,errorMessage:c().node,addFilter:c().func,onQuery:c().func,onFilterMenuOpen:c().func,onFilterMenuClose:c().func,ownState:c().object},z={},j=(0,h.t)("The dataset associated with this chart no longer exists"),L={addFilter:()=>z,onFilterMenuOpen:()=>z,onFilterMenuClose:()=>z,initialValues:z,setControlValue(){},triggerRender:!1,dashboardId:null,chartStackTrace:null,isDeactivatedViz:!1,force:!1},V=p.iK.div`
  min-height: ${e=>e.height}px;
  position: relative;

  .chart-tooltip {
    opacity: 0.75;
    font-size: ${({theme:e})=>e.typography.sizes.s}px;
  }

  .slice_container {
    height: ${e=>e.height}px;
  }
`,K=p.iK.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`,B=p.iK.div`
  font-family: ${({theme:e})=>e.typography.families.monospace};
  white-space: pre;
  word-break: break-word;
  overflow-x: auto;
  white-space: pre-wrap;
`;class H extends u.PureComponent{constructor(e){super(e),this.handleRenderContainerFailure=this.handleRenderContainerFailure.bind(this)}componentDidMount(){this.props.triggerQuery&&"UNDECIDED"!==this.props.filterboxMigrationState&&this.runQuery()}componentDidUpdate(){if(this.props.triggerQuery&&"UNDECIDED"!==this.props.filterboxMigrationState){if(this.props.isDeactivatedViz&&this.props.queriesResponse)return;this.runQuery()}}runQuery(){this.props.chartId>0&&(0,g.cr)(f.T.CLIENT_CACHE)?this.props.actions.getSavedChart(this.props.formData,this.props.force||(0,D.e)(C.KD.force),this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState):this.props.actions.postChartFormData(this.props.formData,this.props.force||(0,D.e)(C.KD.force),this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState)}handleRenderContainerFailure(e,t){const{actions:r,chartId:a}=this.props;m.Z.warn(e),r.chartRenderingFailed(e.toString(),a,t?t.componentStack:null),r.logEvent(Z.aD,{slice_id:a,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:Z.Yd.getTimestamp()-this.renderStartTime})}renderErrorMessage(e){var t;const{chartId:r,chartAlert:a,chartStackTrace:n,datasource:o,dashboardId:i,height:s}=this.props,l=null==e||null==(t=e.errors)?void 0:t[0],d=a||(null==e?void 0:e.message);return void 0!==a&&a!==j&&o===v.tw?(0,A.tZ)(V,{key:r,"data-ui-anchor":"chart",className:"chart-container",height:s},(0,A.tZ)(b.Z,null)):(0,A.tZ)($,{key:r,chartId:r,error:l,subtitle:(0,A.tZ)(B,null,d),copyText:d,link:e?e.link:null,source:i?"dashboard":"explore",stackTrace:n})}render(){const{height:e,chartAlert:t,chartStatus:r,errorMessage:a,onQuery:n,refreshOverlayVisible:o,queriesResponse:i=[],isDeactivatedViz:s=!1,width:d}=this.props,c="loading"===r,u=o&&!a;if(this.renderContainerStartTime=Z.Yd.getTimestamp(),"failed"===r)return i.map((e=>this.renderErrorMessage(e)));if(a){const e=(0,g.cr)(f.T.ENABLE_EXPLORE_DRAG_AND_DROP)?(0,h.t)("Drag and drop values into highlighted field(s) on the left control panel and run query"):(0,h.t)("Select values in highlighted field(s) on the left control panel and run query");return(0,A.tZ)(S.XJ,{title:(0,h.t)("Add required control values to preview chart"),description:e,image:"chart.svg"})}return(0,A.tZ)(T.Z,{onError:this.handleRenderContainerFailure,showMessage:!1},(0,A.tZ)(V,{"data-ui-anchor":"chart",className:"chart-container",height:e,width:d},(0,A.tZ)("div",{className:"slice_container "+(u?" faded":"")},(0,A.tZ)(M,l()({},this.props,{source:this.props.dashboardId?"dashboard":"explore"}))),!c&&!t&&u&&(0,A.tZ)(K,null,(0,A.tZ)(y.Z,{onClick:n,buttonStyle:"primary"},(0,h.t)("Run query"))),c&&!s&&(0,A.tZ)(b.Z,null)))}}H.propTypes=q,H.defaultProps=L;const G=H;var Q=r(74599);const W=(0,a.$j)(null,(function(e){return{actions:(0,n.DE)({...o,updateDataMask:Q.eG,logEvent:i.logEvent},e)}}))(G)},2275:(e,t,r)=>{r.d(t,{cP:()=>l,$6:()=>d,Rw:()=>c,Er:()=>u,DZ:()=>h,$X:()=>p,ck:()=>v});var a=r(45697),n=r.n(a),o=r(81255),i=r(713),s=r(79271);const l=n().shape({id:n().string.isRequired,type:n().oneOf(Object.values(o.ZP)).isRequired,parents:n().arrayOf(n().string),children:n().arrayOf(n().string),meta:n().shape({width:n().number,height:n().number,headerSize:n().oneOf(s.Z.map((e=>e.value))),background:n().oneOf(i.Z.map((e=>e.value))),chartId:n().number})}),d=n().shape({id:n().number.isRequired,chartAlert:n().string,chartStatus:n().string,chartUpdateEndTime:n().number,chartUpdateStartTime:n().number,latestQueryFormData:n().object,queryController:n().shape({abort:n().func}),queriesResponse:n().arrayOf(n().object),triggerQuery:n().bool,lastRendered:n().number}),c=n().shape({slice_id:n().number.isRequired,slice_url:n().string.isRequired,slice_name:n().string.isRequired,datasource:n().string,datasource_name:n().string,datasource_link:n().string,changed_on:n().number.isRequired,modified:n().string.isRequired,viz_type:n().string.isRequired,description:n().string,description_markeddown:n().string,owners:n().arrayOf(n().string)}),u=n().shape({chartId:n().number.isRequired,componentId:n().string.isRequired,filterName:n().string.isRequired,datasourceId:n().string.isRequired,directPathToFilter:n().arrayOf(n().string).isRequired,isDateFilter:n().bool.isRequired,isInstantFilter:n().bool.isRequired,columns:n().object,labels:n().object,scopes:n().object}),h=n().shape({sliceIds:n().arrayOf(n().number).isRequired,expandedSlices:n().object,editMode:n().bool,isPublished:n().bool.isRequired,colorNamespace:n().string,colorScheme:n().string,updatedColorScheme:n().bool,hasUnsavedChanges:n().bool}),p=n().shape({id:n().number.isRequired,metadata:n().object,slug:n().string,dash_edit_perm:n().bool.isRequired,dash_save_perm:n().bool.isRequired,common:n().object,userId:n().string.isRequired}),m=n().shape({value:n().oneOfType([n().number,n().string]).isRequired,label:n().string.isRequired}),g={value:n().oneOfType([n().number,n().string]).isRequired,label:n().string.isRequired,children:n().arrayOf(n().oneOfType([n().shape((f=()=>g,()=>f().apply(void 0,arguments))),m]))};var f;const v=n().oneOfType([n().shape(g),m])},88274:(e,t,r)=>{r.d(t,{Z:()=>_});var a=r(5872),n=r.n(a),o=r(67294),i=r(47859),s=r(86170),l=r(22222),d=r(80644),c=r(54085),u=r(74464),h=r(9330),p=r(89453),m=r(11965);function g(e){return e}const f=()=>null,v={id:"",className:"",preTransformProps:g,overrideTransformProps:void 0,postTransformProps:g,onRenderSuccess(){},onRenderFailure(){}},y=new h.Z;class b extends o.PureComponent{constructor(...e){super(...e),this.container=void 0,this.processChartProps=(0,l.P1)((e=>e.chartProps),(e=>e.preTransformProps),(e=>e.transformProps),(e=>e.postTransformProps),((e,t=g,r=g,a=g)=>a(r(t(e))))),this.createLoadableRenderer=(0,l.P1)((e=>e.chartType),(e=>e.overrideTransformProps),((e,t)=>{if(e){const r=(0,p.Z)({loader:{Chart:()=>(0,c.Z)().getAsPromise(e),transformProps:t?()=>Promise.resolve(t):()=>(0,u.Z)().getAsPromise(e)},loading:t=>this.renderLoading(t,e),render:this.renderChart});return r.preload(),r}return f})),this.renderChart=(e,t)=>{const{Chart:r,transformProps:a}=e,{chartProps:n,preTransformProps:o,postTransformProps:i}=t;return(0,m.tZ)(r,this.processChartProps({chartProps:n,preTransformProps:o,transformProps:a,postTransformProps:i}))},this.renderLoading=(e,t)=>{const{error:r}=e;return r?(0,m.tZ)("div",{className:"alert alert-warning",role:"alert"},(0,m.tZ)("strong",null,"ERROR")," ",(0,m.tZ)("code",null,'chartType="',t,'"')," —",r.toString()):null},this.setRef=e=>{this.container=e}}render(){const{id:e,className:t,preTransformProps:r,postTransformProps:a,chartProps:o=y,onRenderSuccess:i,onRenderFailure:s}=this.props,l=this.createLoadableRenderer(this.props);if(null===o)return null;const d={};return e&&(d.id=e),t&&(d.className=t),(0,m.tZ)("div",n()({},d,{ref:this.setRef}),(0,m.tZ)(l,{preTransformProps:r,postTransformProps:a,chartProps:o,onRenderSuccess:i,onRenderFailure:s}))}}b.defaultProps=v;const S={backgroundColor:"#000",color:"#fff",overflow:"auto",padding:32};var T=r(61988);const Z={maxWidth:800},C={fontSize:16,fontWeight:"bold",paddingBottom:8},D={fontSize:14},E=({className:e,height:t,id:r,width:a})=>{const n=(0,o.useMemo)((()=>((e,t)=>({alignItems:"center",display:"flex",flexDirection:"column",height:e,justifyContent:"center",padding:16,textAlign:"center",width:t}))(t,a)),[t,a]),i="string"==typeof a||a>250,s=(0,T.t)("No results were returned for this query. If you expected results to be returned, ensure any filters are configured properly and the datasource contains data for the selected time range.");return(0,m.tZ)("div",{className:e,id:r,style:n,title:i?void 0:s},(0,m.tZ)("div",{style:Z},(0,m.tZ)("div",{style:C},(0,T.t)("No Results")),i&&(0,m.tZ)("div",{style:D},s)))},R={FallbackComponent:function({componentStack:e,error:t,height:r,width:a}){return(0,m.tZ)("div",{style:{...S,height:r,width:a}},(0,m.tZ)("div",null,(0,m.tZ)("div",null,(0,m.tZ)("b",null,"Oops! An error occured!")),(0,m.tZ)("code",null,t?t.toString():"Unknown Error")),e&&(0,m.tZ)("div",null,(0,m.tZ)("b",null,"Stack Trace:"),(0,m.tZ)("code",null,e.split("\n").map((e=>(0,m.tZ)("div",{key:e},e))))))},height:400,width:"100%",enableNoResults:!0};class _ extends o.PureComponent{constructor(...e){super(...e),this.core=void 0,this.createChartProps=h.Z.createSelector(),this.parseDimension=(0,l.P1)((({width:e})=>e),(({height:e})=>e),((e,t)=>{const r=(0,d.Z)(e),a=(0,d.Z)(t),n={height:a.isDynamic?100*a.multiplier+"%":a.value,width:r.isDynamic?100*r.multiplier+"%":r.value};return{BoundingBox:r.isDynamic&&a.isDynamic&&1===r.multiplier&&1===a.multiplier?o.Fragment:({children:e})=>(0,m.tZ)("div",{style:n},e),heightInfo:a,widthInfo:r}})),this.setRef=e=>{this.core=e}}renderChart(e,t){const{id:r,className:a,chartType:o,preTransformProps:s,overrideTransformProps:l,postTransformProps:d,onRenderSuccess:c,onRenderFailure:u,disableErrorBoundary:h,FallbackComponent:p,onErrorBoundary:g,Wrapper:f,queriesData:v,enableNoResults:y,noResults:S,...T}=this.props,Z=this.createChartProps({...T,queriesData:v,height:t,width:e});let C;if(!y||v&&!v.every((({data:e})=>!e||Array.isArray(e)&&0===e.length))){const n=(0,m.tZ)(b,{ref:this.setRef,id:r,className:a,chartType:o,chartProps:Z,preTransformProps:s,overrideTransformProps:l,postTransformProps:d,onRenderSuccess:c,onRenderFailure:u});C=f?(0,m.tZ)(f,{width:e,height:t},n):n}else C=S||(0,m.tZ)(E,{id:r,className:a,height:t,width:e});return!0===h?C:(0,m.tZ)(i.ZP,{FallbackComponent:r=>(0,m.tZ)(p,n()({width:e,height:t},r)),onError:g},C)}render(){const{heightInfo:e,widthInfo:t,BoundingBox:r}=this.parseDimension(this.props);if(t.isDynamic||e.isDynamic){const{debounceTime:a}=this.props;return(0,m.tZ)(r,null,(0,m.tZ)(s.Z,{debounceTime:a},(({width:r,height:a})=>this.renderChart(t.isDynamic?Math.floor(r):t.value,e.isDynamic?Math.floor(a):e.value))))}return this.renderChart(t.value,e.value)}}_.defaultProps=R},89453:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(68356),n=r.n(a);const o={onRenderFailure(){},onRenderSuccess(){}};function i(e){const t=n().Map(e);class r extends t{componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){const{loaded:e,loading:t,error:r}=this.state,{onRenderFailure:a,onRenderSuccess:n}=this.props;t||(r?a(r):e&&Object.keys(e).length>0&&n())}}return r.defaultProps=void 0,r.defaultProps=o,r.preload=t.preload,r}},9330:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(22222),n=r(78036);const o=800,i=600;class s{constructor(e={}){this.annotationData=void 0,this.datasource=void 0,this.rawDatasource=void 0,this.initialValues=void 0,this.formData=void 0,this.rawFormData=void 0,this.height=void 0,this.hooks=void 0,this.ownState=void 0,this.filterState=void 0,this.queriesData=void 0,this.width=void 0,this.behaviors=void 0,this.appSection=void 0,this.isRefreshing=void 0,this.inputRef=void 0;const{annotationData:t={},datasource:r={},formData:a={},hooks:s={},ownState:l={},filterState:d={},initialValues:c={},queriesData:u=[],behaviors:h=[],width:p=o,height:m=i,appSection:g,isRefreshing:f,inputRef:v}=e;this.width=p,this.height=m,this.annotationData=t,this.datasource=(0,n.Z)(r),this.rawDatasource=r,this.formData=(0,n.Z)(a),this.rawFormData=a,this.hooks=s,this.initialValues=c,this.queriesData=u,this.ownState=l,this.filterState=d,this.behaviors=h,this.appSection=g,this.isRefreshing=f,this.inputRef=v}}s.createSelector=void 0,s.createSelector=function(){return(0,a.P1)((e=>e.annotationData),(e=>e.datasource),(e=>e.formData),(e=>e.height),(e=>e.hooks),(e=>e.initialValues),(e=>e.queriesData),(e=>e.width),(e=>e.ownState),(e=>e.filterState),(e=>e.behaviors),(e=>e.appSection),(e=>e.isRefreshing),(e=>e.inputRef),((e,t,r,a,n,o,i,l,d,c,u,h,p,m)=>new s({annotationData:e,datasource:t,formData:r,height:a,hooks:n,initialValues:o,queriesData:i,ownState:d,filterState:c,width:l,behaviors:u,appSection:h,isRefreshing:p,inputRef:m})))}},80644:(e,t,r)=>{r.d(t,{Z:()=>n});const a={isDynamic:!0,multiplier:1};function n(e){return"auto"===e||"100%"===e?a:"string"==typeof e&&e.length>0&&"%"===e[e.length-1]?{isDynamic:!0,multiplier:parseFloat(e)/100}:{isDynamic:!1,value:"number"==typeof e?e:parseFloat(e)}}},78036:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(68929),n=r.n(a),o=r(68630),i=r.n(o),s=r(67523),l=r.n(s);function d(e){if(null==e)return e;if(i()(e))return l()(e,((e,t)=>n()(t)));throw new Error(`Cannot convert input that is not a plain object: ${e}`)}},37488:(e,t,r)=>{r.d(t,{Z:()=>o}),r(67294);var a=r(11965),n={name:"1qbe4ct",styles:"& :nth-child(1):not(:nth-last-child(1)){border-top-right-radius:0;border-bottom-right-radius:0;border-right:0;margin-left:0;}& :not(:nth-child(1)):not(:nth-last-child(1)){border-radius:0;border-right:0;margin-left:0;}& :nth-last-child(1):not(:nth-child(1)){border-top-left-radius:0;border-bottom-left-radius:0;margin-left:0;}"};function o(e){const{className:t,children:r}=e;return(0,a.tZ)("div",{role:"group",className:t,css:n},r)}},79789:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(67294),n=r(61988),o=r(51995),i=r(70163),s=r(58593),l=r(11965);const d=function({certifiedBy:e,details:t,size:r="l"}){return(0,l.tZ)(s.u,{id:"certified-details-tooltip",title:(0,l.tZ)(a.Fragment,null,e&&(0,l.tZ)("div",null,(0,l.tZ)("strong",null,(0,n.t)("Certified by %s",e))),(0,l.tZ)("div",null,t))},(0,l.tZ)(i.Z.Certified,{iconColor:o.K6.colors.primary.base,iconSize:r}))}},9433:(e,t,r)=>{r.d(t,{CronPicker:()=>u});var a=r(5872),n=r.n(a),o=(r(67294),r(85631)),i=r(61988),s=r(51995),l=r(61247),d=r(11965);const c={everyText:(0,i.t)("every"),emptyMonths:(0,i.t)("every month"),emptyMonthDays:(0,i.t)("every day of the month"),emptyMonthDaysShort:(0,i.t)("day of the month"),emptyWeekDays:(0,i.t)("every day of the week"),emptyWeekDaysShort:(0,i.t)("day of the week"),emptyHours:(0,i.t)("every hour"),emptyMinutes:(0,i.t)("every minute"),emptyMinutesForHourPeriod:(0,i.t)("every"),yearOption:(0,i.t)("year"),monthOption:(0,i.t)("month"),weekOption:(0,i.t)("week"),dayOption:(0,i.t)("day"),hourOption:(0,i.t)("hour"),minuteOption:(0,i.t)("minute"),rebootOption:(0,i.t)("reboot"),prefixPeriod:(0,i.t)("Every"),prefixMonths:(0,i.t)("in"),prefixMonthDays:(0,i.t)("on"),prefixWeekDays:(0,i.t)("on"),prefixWeekDaysForMonthAndYearPeriod:(0,i.t)("and"),prefixHours:(0,i.t)("at"),prefixMinutes:(0,i.t)(":"),prefixMinutesForHourPeriod:(0,i.t)("at"),suffixMinutesForHourPeriod:(0,i.t)("minute(s)"),errorInvalidCron:(0,i.t)("Invalid cron expression"),clearButtonText:(0,i.t)("Clear"),weekDays:[(0,i.t)("Sunday"),(0,i.t)("Monday"),(0,i.t)("Tuesday"),(0,i.t)("Wednesday"),(0,i.t)("Thursday"),(0,i.t)("Friday"),(0,i.t)("Saturday")],months:[(0,i.t)("January"),(0,i.t)("February"),(0,i.t)("March"),(0,i.t)("April"),(0,i.t)("May"),(0,i.t)("June"),(0,i.t)("July"),(0,i.t)("August"),(0,i.t)("September"),(0,i.t)("October"),(0,i.t)("November"),(0,i.t)("December")],altWeekDays:[(0,i.t)("SUN"),(0,i.t)("MON"),(0,i.t)("TUE"),(0,i.t)("WED"),(0,i.t)("THU"),(0,i.t)("FRI"),(0,i.t)("SAT")],altMonths:[(0,i.t)("JAN"),(0,i.t)("FEB"),(0,i.t)("MAR"),(0,i.t)("APR"),(0,i.t)("MAY"),(0,i.t)("JUN"),(0,i.t)("JUL"),(0,i.t)("AUG"),(0,i.t)("SEP"),(0,i.t)("OCT"),(0,i.t)("NOV"),(0,i.t)("DEC")]},u=(0,s.iK)((e=>(0,d.tZ)(o.ZP,{getPopupContainer:e=>e.parentElement},(0,d.tZ)(l.Z,n()({locale:c},e)))))`
  .react-js-cron-select:not(.react-js-cron-custom-select) > div:first-of-type,
  .react-js-cron-custom-select {
    border-radius: ${({theme:e})=>e.gridUnit}px;
    background-color: ${({theme:e})=>e.colors.grayscale.light4} !important;
  }
  .react-js-cron-custom-select > div:first-of-type {
    border-radius: ${({theme:e})=>e.gridUnit}px;
  }
`},17198:(e,t,r)=>{r.d(t,{Z:()=>h});var a=r(51995),n=r(61988),o=r(67294),i=r(9875),s=r(74069),l=r(49238),d=r(11965);const c=a.iK.div`
  padding-top: 8px;
  width: 50%;
  label {
    color: ${({theme:e})=>e.colors.grayscale.base};
    text-transform: uppercase;
  }
`,u=a.iK.div`
  line-height: 40px;
  padding-top: 16px;
`;function h({description:e,onConfirm:t,onHide:r,open:a,title:h}){const[p,m]=(0,o.useState)(!0),[g,f]=(0,o.useState)(""),v=()=>{f(""),t()};return(0,d.tZ)(s.Z,{disablePrimaryButton:p,onHide:()=>{f(""),r()},onHandledPrimaryAction:v,primaryButtonName:(0,n.t)("delete"),primaryButtonType:"danger",show:a,title:h},(0,d.tZ)(u,null,e),(0,d.tZ)(c,null,(0,d.tZ)(l.lX,{htmlFor:"delete"},(0,n.t)('Type "%s" to confirm',(0,n.t)("DELETE"))),(0,d.tZ)(i.II,{type:"text",id:"delete",autoComplete:"off",value:g,onChange:e=>{var t;const r=null!=(t=e.target.value)?t:"";m(r.toUpperCase()!==(0,n.t)("DELETE")),f(r)},onPressEnter:()=>{p||v()}})))}},88694:(e,t,r)=>{r.d(t,{L:()=>c,$:()=>u});var a=r(5872),n=r.n(a),o=(r(67294),r(4715)),i=r(51995),s=r(11965);const l=i.iK.div`
  width: ${({theme:e})=>.75*e.gridUnit}px;
  height: ${({theme:e})=>.75*e.gridUnit}px;
  border-radius: 50%;
  background-color: ${({theme:e})=>e.colors.grayscale.light1};

  font-weight: ${({theme:e})=>e.typography.weights.normal};
  display: inline-flex;
  position: relative;

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary.base};

    &::before,
    &::after {
      background-color: ${({theme:e})=>e.colors.primary.base};
    }
  }

  &::before,
  &::after {
    position: absolute;
    content: ' ';
    width: ${({theme:e})=>.75*e.gridUnit}px;
    height: ${({theme:e})=>.75*e.gridUnit}px;
    border-radius: 50%;
    background-color: ${({theme:e})=>e.colors.grayscale.light1};
  }

  &::before {
    top: ${({theme:e})=>e.gridUnit}px;
  }

  &::after {
    bottom: ${({theme:e})=>e.gridUnit}px;
  }
`,d=i.iK.div`
  display: flex;
  align-items: center;
  padding: ${({theme:e})=>2*e.gridUnit}px;
  padding-left: ${({theme:e})=>e.gridUnit}px;
`,c=({overlay:e,...t})=>(0,s.tZ)(o.Gj,n()({overlay:e},t),(0,s.tZ)(d,null,(0,s.tZ)(l,null))),u=e=>(0,s.tZ)(o.Gj,n()({overlayStyle:{zIndex:99,animationDuration:"0s"}},e))},38270:(e,t,r)=>{r.d(t,{Z:()=>h});var a=r(67294),n=r(94184),o=r.n(n),i=r(51995),s=r(61988),l=r(58593),d=r(79789),c=r(11965);const u=(0,i.iK)(d.Z)`
  vertical-align: middle;
`;function h({canEdit:e=!1,editing:t=!1,extraClasses:r,multiLine:n=!1,noPermitTooltip:i,onSaveTitle:d,showTooltip:h=!0,style:p,title:m="",defaultTitle:g="",placeholder:f="",certifiedBy:v,certificationDetails:y}){const[b,S]=(0,a.useState)(t),[T,Z]=(0,a.useState)(m),[C,D]=(0,a.useState)(m),[E,R]=(0,a.useState)(null),_=(0,a.useRef)();function w(){if(!e||b)return;const t=_.current?_.current.getBoundingClientRect():null;S(!0),R(t)}function x(){const t=T.trim();e&&(S(!1),t.length?(C!==t&&D(t),m!==t&&d(t)):Z(C))}function F(e){" "===e.key&&e.stopPropagation(),"Enter"===e.key&&(e.preventDefault(),x())}function A(t){e&&Z(t.target.value)}function P(e){"Enter"===e.key&&(e.preventDefault(),x())}let O;(0,a.useEffect)((()=>{m!==T&&(D(T),Z(m))}),[m]),(0,a.useEffect)((()=>{if(b&&(_.current.focus(),_.current.setSelectionRange)){const{length:e}=_.current.value;_.current.setSelectionRange(e,e),_.current.scrollLeft=_.current.scrollWidth,_.current.scrollTop=_.current.scrollHeight}}),[b]),O=T,b||T||(O=g||m);const k=b&&E?{height:`${E.height}px`}:void 0;let I=n&&b?(0,c.tZ)("textarea",{ref:_,value:O,className:m?void 0:"text-muted",onKeyDown:F,onChange:A,onBlur:x,onClick:w,onKeyPress:P,placeholder:f,style:k}):(0,c.tZ)("input",{ref:_,type:b?"text":"button",value:O,className:m?void 0:"text-muted",onKeyDown:F,onChange:A,onBlur:x,onClick:w,onKeyPress:P,placeholder:f});return h&&!b&&(I=(0,c.tZ)(l.u,{id:"title-tooltip",title:e?(0,s.t)("Click to edit"):i||(0,s.t)("You don't have the rights to alter this title.")},I)),e||(I=(0,c.tZ)("span",{title:O},O)),(0,c.tZ)("span",{className:o()("editable-title",r,e&&"editable-title--editable",b&&"editable-title--editing"),style:p},v&&(0,c.tZ)(a.Fragment,null,(0,c.tZ)(u,{certifiedBy:v,details:y,size:"xl"})," "),I)}},36674:(e,t,r)=>{r.d(t,{Z:()=>u});var a=r(67294),n=r(51995),o=r(61988),i=r(58593),s=r(33626),l=r(70163),d=r(11965);const c=n.iK.a`
  font-size: ${({theme:e})=>e.typography.sizes.xl}px;
  display: flex;
  padding: 0 0 0 0.5em;
`,u=({itemId:e,isStarred:t,showTooltip:r,saveFaveStar:n,fetchFaveStar:u})=>{(0,s.J)((()=>{u&&u(e)}));const h=(0,a.useCallback)((r=>{r.preventDefault(),n(e,!!t)}),[t,e,n]),p=(0,d.tZ)(c,{href:"#",onClick:h,className:"fave-unfave-icon",role:"button"},t?(0,d.tZ)(l.Z.FavoriteSelected,{iconSize:"xxl"}):(0,d.tZ)(l.Z.FavoriteUnselected,{iconSize:"xxl"}));return r?(0,d.tZ)(i.u,{id:"fave-unfave-tooltip",title:(0,o.t)("Click to favorite/unfavorite")},p):p}},48600:(e,t,r)=>{r.d(t,{Z:()=>v});var a=r(11965),n=r(67294),o=r(37703),i=r(51995),s=r(61988),l=r(70163),d=r(12441),c=r(83862),u=r(88694),h=r(91877),p=r(93185),m=r(17198);const g=e=>a.iv`
  color: ${e.colors.error.base};
`;var f={name:"833hqy",styles:"width:200px"};function v({showReportModal:e,toggleActive:t,deleteActiveReport:r}){const v=(0,o.v9)((e=>e.reports)),y=v[Object.keys(v)[0]],[b,S]=(0,n.useState)(null),T=(0,i.Fg)();return(0,h.cr)(p.T.ALERT_REPORTS)?(0,a.tZ)(n.Fragment,null,(0,a.tZ)(u.$,{overlay:(0,a.tZ)(c.v,{selectable:!1,css:f},(0,a.tZ)(c.v.Item,null,(0,s.t)("Email reports active"),(0,a.tZ)(d.r,{checked:null==y?void 0:y.active,onClick:e=>(async(e,r)=>{null!=e&&e.id&&t(e,r)})(y,e),size:"small",css:(0,a.iv)({marginLeft:2*T.gridUnit},"","")})),(0,a.tZ)(c.v.Item,{onClick:e},(0,s.t)("Edit email report")),(0,a.tZ)(c.v.Item,{onClick:()=>S(y),css:g},(0,s.t)("Delete email report"))),trigger:["click"],getPopupContainer:e=>e.closest(".action-button")},(0,a.tZ)("span",{role:"button",className:"action-button",tabIndex:0},(0,a.tZ)(l.Z.Calendar,null))),b&&(0,a.tZ)(m.Z,{description:(0,s.t)("This action will permanently delete %s.",b.name),onConfirm:()=>{b&&(e=>{r(e),S(null)})(b)},onHide:()=>S(null),open:!0,title:(0,s.t)("Delete Report?")})):null}},97860:(e,t,r)=>{r.d(t,{Z:()=>I});var a=r(67294),n=r(61988),o=r(98286),i=r(14890),s=r(37703),l=r(61358),d=r(27904),c=r(87858),u=r(70163),h=r(14114),p=r(51995),m=r(11965),g=r(74069),f=r(35932),v=r(87183),y=r(9433);const b=(0,p.iK)(g.Z)`
  .ant-modal-body {
    padding: 0;
  }

  h4 {
    font-weight: 600;
  }
`,S=p.iK.div`
  padding: ${({theme:e})=>`${3*e.gridUnit}px ${4*e.gridUnit}px ${2*e.gridUnit}px`};
  label {
    font-size: ${({theme:e})=>e.typography.sizes.s-1}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,T=p.iK.div`
  border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  padding: ${({theme:e})=>`${4*e.gridUnit}px ${4*e.gridUnit}px ${6*e.gridUnit}px`};
  .ant-select {
    width: 100%;
  }
  .control-label {
    font-size: ${({theme:e})=>e.typography.sizes.s-1}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,Z=p.iK.span`
  span {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    vertical-align: middle;
  }
  .text {
    vertical-align: middle;
  }
`,C=p.iK.div`
  margin-bottom: ${({theme:e})=>7*e.gridUnit}px;

  h4 {
    margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  }
`,D=(0,p.iK)(y.CronPicker)`
  margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
`,E=p.iK.p`
  color: ${({theme:e})=>e.colors.error.base};
`,R=m.iv`
  margin-bottom: 0;
`,_=(0,p.iK)(f.Z)`
  width: ${({theme:e})=>40*e.gridUnit}px;
`,w=p.iK.div`
  margin: ${({theme:e})=>8*e.gridUnit}px 0
    ${({theme:e})=>4*e.gridUnit}px;
`,x=(0,p.iK)(v.Y)`
  display: block;
  line-height: ${({theme:e})=>8*e.gridUnit}px;
`,F=(0,p.iK)(v.Y.Group)`
  margin-left: ${({theme:e})=>.5*e.gridUnit}px;
`;var A;!function(e){e[e.inputChange=0]="inputChange",e[e.fetched=1]="fetched",e[e.reset=2]="reset",e[e.error=3]="error"}(A||(A={}));const P=["pivot_table","pivot_table_v2","table","paired_ttest"],O="TEXT",k=(e,t)=>{const r={name:"Weekly Report"};switch(t.type){case A.inputChange:return{...r,...e,[t.payload.name]:t.payload.value};case A.fetched:return{...r,...t.payload};case A.reset:return{...r};case A.error:return{...e,error:t.payload.name[0]};default:return e}},I=(0,s.$j)(null,(e=>(0,i.DE)({addReport:l.cq,editReport:l.Me},e)))((0,h.Z)((({onReportAdd:e,onHide:t,show:r=!1,...i})=>{var h,p;const g=null==(h=i.props.chart)||null==(p=h.sliceFormData)?void 0:p.viz_type,f=!!i.props.chart,v=f&&P.includes(g)?O:"PNG",[y,I]=(0,a.useReducer)(k,null),M=(0,a.useCallback)(((e,t)=>{I({type:e,payload:t})}),[]),[N,U]=(0,a.useState)(),$=(0,s.I0)(),q=(0,s.v9)((e=>e.reports)),z=q&&Object.keys(q).length;(0,a.useEffect)((()=>{if(z){const e=Object.keys(q),t=q[e[0]];I({type:A.fetched,payload:t})}else I({type:A.reset})}),[q]);const j=(0,m.tZ)(Z,null,(0,m.tZ)(u.Z.Calendar,null),(0,m.tZ)("span",{className:"text"},z?(0,n.t)("Edit Email Report"):(0,n.t)("New Email Report"))),L=(0,m.tZ)(a.Fragment,null,(0,m.tZ)(_,{key:"back",onClick:t},(0,n.t)("Cancel")),(0,m.tZ)(_,{key:"submit",buttonStyle:"primary",onClick:async()=>{var r;const a={crontab:null==y?void 0:y.crontab,dashboard:i.props.dashboardId,chart:null==(r=i.props.chart)?void 0:r.id,description:null==y?void 0:y.description,name:null==y?void 0:y.name,owners:[i.props.userId],recipients:[{recipient_config_json:{target:i.props.userEmail},type:"Email"}],type:"Report",creation_method:i.props.creationMethod,active:!0,report_format:(null==y?void 0:y.report_format)||v,timezone:null==y?void 0:y.timezone,force_screenshot:!1};if(z)await $((0,l.Me)(null==y?void 0:y.id,a)),t();else try{await $((0,l.cq)(a)),t()}catch(e){const t=(await(0,o.O)(e)).message;M(A.error,t)}e&&e()},disabled:!(null!=y&&y.name)},z?(0,n.t)("Save"):(0,n.t)("Add"))),V=(0,m.tZ)(a.Fragment,null,(0,m.tZ)(w,null,(0,m.tZ)("h4",null,(0,n.t)("Message Content"))),(0,m.tZ)("div",{className:"inline-container"},(0,m.tZ)(F,{onChange:e=>{M(A.inputChange,{name:"report_format",value:e.target.value})},value:(null==y?void 0:y.report_format)||v},P.includes(g)&&(0,m.tZ)(x,{value:O},(0,n.t)("Text embedded in email")),(0,m.tZ)(x,{value:"PNG"},(0,n.t)("Image (PNG) embedded in email")),(0,m.tZ)(x,{value:"CSV"},(0,n.t)("Formatted CSV attached in email")))));return(0,m.tZ)(b,{show:r,onHide:t,title:j,footer:L,width:"432",centered:!0},(0,m.tZ)(S,null,(0,m.tZ)(c.Z,{id:"name",name:"name",value:(null==y?void 0:y.name)||"",placeholder:(0,n.t)("Weekly Report"),required:!0,validationMethods:{onChange:({target:e})=>M(A.inputChange,{name:e.name,value:e.value})},errorMessage:(null==y?void 0:y.error)||"",label:"Report Name"}),(0,m.tZ)(c.Z,{id:"description",name:"description",value:(null==y?void 0:y.description)||"",validationMethods:{onChange:({target:e})=>M(A.inputChange,{name:e.name,value:e.value})},errorMessage:"",label:(0,n.t)("Description"),placeholder:(0,n.t)("Include a description that will be sent with your report"),css:R})),(0,m.tZ)(T,null,(0,m.tZ)(C,null,(0,m.tZ)("h4",{css:e=>(e=>m.iv`
  margin: ${3*e.gridUnit}px 0;
  font-weight: ${e.typography.weights.bold};
`)(e)},(0,n.t)("Schedule")),(0,m.tZ)("p",null,(0,n.t)("Scheduled reports will be sent to your email as a PNG"))),(0,m.tZ)(D,{clearButton:!1,value:(0,n.t)((null==y?void 0:y.crontab)||"0 12 * * 1"),setValue:e=>{M(A.inputChange,{name:"crontab",value:e})},onError:U}),(0,m.tZ)(E,null,N),(0,m.tZ)("div",{className:"control-label",css:e=>(e=>m.iv`
  margin: ${3*e.gridUnit}px 0 ${2*e.gridUnit}px;
`)(e)},(0,n.t)("Timezone")),(0,m.tZ)(d.Z,{onTimezoneChange:e=>{I({type:A.inputChange,payload:{name:"timezone",value:e}})},timezone:null==y?void 0:y.timezone}),f&&V))})))},12441:(e,t,r)=>{r.d(t,{r:()=>s}),r(67294);var a=r(51995),n=r(40987),o=r(11965);const i=(0,a.iK)(n.Z)`
  .ant-switch-checked {
    background-color: ${({theme:e})=>e.colors.primary.base};
  }
`,s=e=>(0,o.tZ)(i,e)},27904:(e,t,r)=>{r.d(t,{Z:()=>S});var a=r(11965),n=r(67294),o=r(80008),i=r.n(o),s=r(61988),l=r(4715);const d="GMT Standard Time",c={"-300-240":["Eastern Standard Time","Eastern Daylight Time"],"-360-300":["Central Standard Time","Central Daylight Time"],"-420-360":["Mountain Standard Time","Mountain Daylight Time"],"-420-420":["Mountain Standard Time - Phoenix","Mountain Standard Time - Phoenix"],"-480-420":["Pacific Standard Time","Pacific Daylight Time"],"-540-480":["Alaska Standard Time","Alaska Daylight Time"],"-600-600":["Hawaii Standard Time","Hawaii Daylight Time"],60120:["Central European Time","Central European Daylight Time"],"00":[d,d],"060":["GMT Standard Time - London","British Summer Time"]},u=i()(),h=i()([2021,1]),p=i()([2021,7]),m=e=>h.tz(e).utcOffset().toString()+p.tz(e).utcOffset().toString(),g=e=>{var t,r;const a=m(e);return(u.tz(e).isDST()?null==(t=c[a])?void 0:t[1]:null==(r=c[a])?void 0:r[0])||e},f=i().tz.countries().map((e=>i().tz.zonesForCountry(e,!0))).flat(),v=[];f.forEach((e=>{v.find((t=>m(t.name)===m(e.name)))||v.push(e)}));const y=v.map((e=>({label:`GMT ${i().tz(u,e.name).format("Z")} (${g(e.name)})`,value:e.name,offsets:m(e.name),timezoneName:e.name}))),b=(e,t)=>i().tz(u,e.timezoneName).utcOffset()-i().tz(u,t.timezoneName).utcOffset();y.sort(b);const S=({onTimezoneChange:e,timezone:t})=>{const r=(0,n.useMemo)((()=>(e=>{var t;return(null==(t=y.find((t=>t.offsets===m(e))))?void 0:t.value)||"Africa/Abidjan"})(t||i().tz.guess())),[t]);return(0,n.useEffect)((()=>{t!==r&&e(r)}),[r,e,t]),(0,a.tZ)(l.Ph,{ariaLabel:(0,s.t)("Timezone selector"),css:(0,a.iv)({minWidth:"400px"},"",""),onChange:t=>e(t),value:r,options:y,sortComparator:b})}},9531:(e,t,r)=>{r.d(t,{tw:()=>a,Ky:()=>n,RX:()=>o,Mz:()=>i,gz:()=>s,I6:()=>l,UN:()=>d,a7:()=>c,XX:()=>u});const a={id:0,type:r(46078).i.Table,uid:"_placeholder_",datasource_name:"",table_name:"",columns:[],column_types:[],metrics:[],column_format:{},verbose_map:{},main_dttm_col:"",description:""},n=53,o=50,i=72,s=32,l=260,d=80,c=46,u=374},713:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(61988),n=r(80621);const o=[{value:n.HE,label:(0,a.t)("Transparent"),className:"background--transparent"},{value:n.b5,label:(0,a.t)("White"),className:"background--white"}]},79271:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(61988),n=r(80621);const o=[{value:n.u_,label:(0,a.t)("Small"),className:"header-style-option header-small"},{value:n.OE,label:(0,a.t)("Medium"),className:"header-style-option header-medium"},{value:n.pQ,label:(0,a.t)("Large"),className:"header-style-option header-large"}]},651:(e,t,r)=>{r.r(t),r.d(t,{SET_DATASOURCE_TYPE:()=>s,setDatasourceType:()=>l,SET_DATASOURCE:()=>d,setDatasource:()=>c,SET_DATASOURCES:()=>u,setDatasources:()=>h,POST_DATASOURCE_STARTED:()=>p,FETCH_DATASOURCE_SUCCEEDED:()=>m,fetchDatasourceSucceeded:()=>g,FETCH_DATASOURCES_STARTED:()=>f,fetchDatasourcesStarted:()=>v,FETCH_DATASOURCES_SUCCEEDED:()=>y,fetchDatasourcesSucceeded:()=>b,TOGGLE_FAVE_STAR:()=>S,toggleFaveStar:()=>T,FETCH_FAVE_STAR:()=>Z,fetchFaveStar:()=>C,SAVE_FAVE_STAR:()=>D,saveFaveStar:()=>E,SET_FIELD_VALUE:()=>R,setControlValue:()=>_,SET_EXPLORE_CONTROLS:()=>w,setExploreControls:()=>x,UPDATE_CHART_TITLE:()=>F,updateChartTitle:()=>A,CREATE_NEW_SLICE:()=>P,createNewSlice:()=>O,SLICE_UPDATED:()=>k,sliceUpdated:()=>I,SET_TIME_FORMATTED_COLUMN:()=>M,setTimeFormattedColumn:()=>N,UNSET_TIME_FORMATTED_COLUMN:()=>U,unsetTimeFormattedColumn:()=>$,exploreActions:()=>q});var a=r(31069),n=r(61988),o=r(72570);const i="/superset/favstar/slice",s="SET_DATASOURCE_TYPE";function l(e){return{type:s,datasourceType:e}}const d="SET_DATASOURCE";function c(e){return{type:d,datasource:e}}const u="SET_DATASOURCES";function h(e){return{type:u,datasources:e}}const p="POST_DATASOURCE_STARTED",m="FETCH_DATASOURCE_SUCCEEDED";function g(){return{type:m}}const f="FETCH_DATASOURCES_STARTED";function v(){return{type:f}}const y="FETCH_DATASOURCES_SUCCEEDED";function b(){return{type:y}}const S="TOGGLE_FAVE_STAR";function T(e){return{type:S,isStarred:e}}const Z="FETCH_FAVE_STAR";function C(e){return function(t){a.Z.get({endpoint:`${i}/${e}/count/`}).then((({json:e})=>{e.count>0&&t(T(!0))}))}}const D="SAVE_FAVE_STAR";function E(e,t){return function(r){const s=t?"unselect":"select";a.Z.get({endpoint:`${i}/${e}/${s}/`}).then((()=>r(T(!t)))).catch((()=>{r((0,o.Gb)((0,n.t)("An error occurred while starring this chart")))}))}}const R="SET_FIELD_VALUE";function _(e,t,r){return{type:R,controlName:e,value:t,validationErrors:r}}const w="UPDATE_EXPLORE_CONTROLS";function x(e){return{type:w,formData:e}}const F="UPDATE_CHART_TITLE";function A(e){return{type:F,sliceName:e}}const P="CREATE_NEW_SLICE";function O(e,t,r,a,n){return{type:P,can_add:e,can_download:t,can_overwrite:r,slice:a,form_data:n}}const k="SLICE_UPDATED";function I(e){return{type:k,slice:e}}const M="SET_TIME_FORMATTED_COLUMN";function N(e,t){return{type:M,datasourceId:e,columnName:t}}const U="UNSET_TIME_FORMATTED_COLUMN";function $(e,t){return{type:U,datasourceId:e,columnIndex:t}}const q={...o.s2,setDatasourceType:l,setDatasource:c,setDatasources:h,fetchDatasourcesStarted:v,fetchDatasourcesSucceeded:b,toggleFaveStar:T,fetchFaveStar:C,saveFaveStar:E,setControlValue:_,setExploreControls:x,updateChartTitle:A,createNewSlice:O,sliceUpdated:I,setTimeFormattedColumn:N,unsetTimeFormattedColumn:$}},50909:(e,t,r)=>{r.d(t,{qi:()=>D,m:()=>R,HS:()=>_,uy:()=>w,C4:()=>k,_q:()=>M});var a=r(11965),n=r(67294),o=r(51995),i=r(61988),s=r(51115),l=r(42846),d=r(88889),c=r(23279),u=r.n(c),h=r(37703),p=r(4715),m=r(9875),g=r(27600),f=r(87183),v=r(70163),y=r(35932),b=r(76697),S=r(54076),T=r(13433),Z=r(33891),C=r(651);const D=(0,o.iK)(y.Z)`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;

  // needed to override button's first-of-type margin: 0
  && {
    margin: 0 ${({theme:e})=>2*e.gridUnit}px;
  }

  i {
    padding: 0 ${({theme:e})=>e.gridUnit}px;
  }
`,E=(0,a.tZ)(D,{buttonSize:"xsmall","aria-label":(0,i.t)("Copy")},(0,a.tZ)("i",{className:"fa fa-clipboard"})),R=({data:e,columns:t})=>(0,a.tZ)(T.Z,{text:e&&t?(0,S.Mv)(e,t):"",wrapped:!1,copyNode:E}),_=({onChangeHandler:e})=>{const t=u()(e,g.M$);return(0,a.tZ)(m.II,{placeholder:(0,i.t)("Search"),onChange:e=>{const r=e.target.value;t(r)}})},w=({data:e,loading:t})=>{var r;return(0,a.tZ)(Z.Z,{rowcount:null!=(r=null==e?void 0:e.length)?r:0,loading:t,suffix:(0,i.t)("rows retrieved")})};var x;!function(e){e[e.Formatted=0]="Formatted",e[e.Original=1]="Original"}(x||(x={}));const F=({onChange:e,value:t})=>(0,a.tZ)(f.Y.Group,{value:t,onChange:e},(0,a.tZ)(p.T,{direction:"vertical"},(0,a.tZ)(f.Y,{value:x.Original},(0,i.t)("Original value")),(0,a.tZ)(f.Y,{value:x.Formatted},(0,i.t)("Formatted date")))),A=o.iK.div`
  display: flex;
  flex-direction: column;

  padding: ${({theme:e})=>4*e.gridUnit+"px"};
`,P=o.iK.span`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  color: ${({theme:e})=>e.colors.grayscale.base};
  margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  text-transform: uppercase;
`,O=({columnName:e,datasourceId:t,timeFormattedColumnIndex:r})=>{const s=(0,o.Fg)(),l=(0,h.I0)(),d=r>-1,c=(0,n.useCallback)((a=>{t&&(a.target.value===x.Original&&d?l((0,C.unsetTimeFormattedColumn)(t,r)):a.target.value!==x.Formatted||d||l((0,C.setTimeFormattedColumn)(t,e)))}),[r,e,t,l,d]),u=(0,n.useMemo)((()=>t?(0,a.tZ)(A,{onClick:e=>e.stopPropagation()},(0,a.tZ)(a.xB,{styles:a.iv`
              .column-formatting-popover .ant-popover-inner-content {
                padding: 0;
              }
            `}),(0,a.tZ)(P,null,(0,i.t)("Column Formatting")),(0,a.tZ)(F,{onChange:c,value:d?x.Formatted:x.Original})):null),[t,d,c]);return t?(0,a.tZ)("span",null,(0,a.tZ)(b.Z,{overlayClassName:"column-formatting-popover",trigger:"click",content:u,placement:"bottomLeft",arrowPointAtCenter:!0},(0,a.tZ)(v.Z.SettingOutlined,{iconSize:"m",iconColor:s.colors.grayscale.light1,css:(0,a.iv)({marginRight:`${s.gridUnit}px`},"",""),onClick:e=>e.stopPropagation()})),e):(0,a.tZ)("span",null,e)},k=(e,t)=>{const r=(0,n.useMemo)((()=>{var e;return null!=(e=null==t?void 0:t.map((e=>Object.values(e).map((e=>null==e?void 0:e.toString().toLowerCase())))))?e:[]}),[t]);return(0,n.useMemo)((()=>null!=t&&t.length?t.filter(((t,a)=>r[a].some((t=>null==t?void 0:t.includes(e.toLowerCase()))))):[]),[t,e,r])},I=(0,s.bt)(l.Z.DATABASE_DATETIME),M=(e,t,r,o,i=[],s)=>(0,n.useMemo)((()=>e&&null!=r&&r.length?e.filter((e=>Object.keys(r[0]).includes(e))).map(((e,r)=>{const n=(null==t?void 0:t[r])===d.Z.TEMPORAL?i.indexOf(e):-1;return{id:e,accessor:t=>t[e],Header:(null==t?void 0:t[r])===d.Z.TEMPORAL?(0,a.tZ)(O,{columnName:e,datasourceId:o,timeFormattedColumnIndex:n}):e,Cell:({value:e})=>!0===e?g.Ly:!1===e?g.gz:n>-1?I(e):String(e),...null==s?void 0:s[e]}})):[]),[e,r,t,o,s,i])},33891:(e,t,r)=>{r.d(t,{Z:()=>l}),r(67294);var a=r(61988),n=r(67190),o=r(37921),i=r(58593),s=r(11965);function l(e){const{rowcount:t=0,limit:r,suffix:l=(0,a.t)("rows"),loading:d}=e,c=t===r,u=c||0===t&&!d?"danger":"default",h=(0,n.JB)()(t),p=(0,s.tZ)("span",null,c&&(0,s.tZ)("div",null,(0,a.t)("Limit reached")),d?"Loading":t);return(0,s.tZ)(i.u,{id:"tt-rowcount-tooltip",title:p},(0,s.tZ)(o.Z,{type:u},d?"Loading...":`${h} ${l}`))}},15423:(e,t,r)=>{r.d(t,{Z:()=>Z});var a=r(67294),n=r(51995),o=r(55786),i=r(61988),s=r(42110),l=r(120),d=r(13433),c=r(38703),u=r(50909),h=r(98286),p=r(52256),m=r(53459),g=r(49889),f=r(33743),v=r(22489),y=r(11965);const b=(0,n.iK)(u.qi)`
  && {
    margin: 0 0 ${({theme:e})=>e.gridUnit}px;
  }
`;s.Z.registerLanguage("markdown",m.Z),s.Z.registerLanguage("html",g.Z),s.Z.registerLanguage("sql",f.Z),s.Z.registerLanguage("json",v.Z);const S=n.iK.div`
  height: 100%;
`,T=(0,n.iK)(s.Z)`
  height: calc(100% - 26px); // 100% - clipboard height
`,Z=e=>{const[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null);return(0,a.useEffect)((()=>{s(!0),(0,p.getChartDataRequest)({formData:e.latestQueryFormData,resultFormat:"json",resultType:"query"}).then((({json:e})=>{r((0,o.Z)(e.result)),s(!1),m(null)})).catch((e=>{(0,h.O)(e).then((({error:t,message:r})=>{m(t||r||e.statusText||(0,i.t)("Sorry, An error occurred")),s(!1)}))}))}),[JSON.stringify(e.latestQueryFormData)]),n?(0,y.tZ)(c.Z,null):u?(0,y.tZ)("pre",null,u):(0,y.tZ)(a.Fragment,null,t.map((e=>e.query?(0,y.tZ)(S,{key:e.query},(0,y.tZ)(d.Z,{text:e.query,shouldShowText:!1,copyNode:(0,y.tZ)(b,{buttonSize:"xsmall"},(0,y.tZ)("i",{className:"fa fa-clipboard"}))}),(0,y.tZ)(T,{language:e.language||void 0,style:l.Z},e.query)):null)))}},40219:(e,t,r)=>{r.d(t,{nv:()=>c,LW:()=>u});var a=r(57557),n=r.n(a),o=r(31069);const i=["url_params"],s=e=>n()(e,i),l=(e,t)=>{let r="api/v1/explore/form_data";return e&&(r=r.concat(`/${e}`)),t&&(r=r.concat(`?tab_id=${t}`)),r},d=(e,t,r)=>{const a={dataset_id:e,form_data:JSON.stringify(s(t))};return r&&(a.chart_id=r),a},c=(e,t,r,a)=>o.Z.post({endpoint:l(void 0,a),jsonPayload:d(e,t,r)}).then((e=>e.json.key)),u=(e,t,r,a,n)=>o.Z.put({endpoint:l(t,n),jsonPayload:d(e,r,a)}).then((e=>e.json.message))},28615:(e,t,r)=>{r.d(t,{S:()=>o});var a=r(67294),n=r(60812);function o(e,t){const r=(0,n.D)(e);(0,a.useEffect)((()=>{e!==r&&t(r,e)}),[e,r,t])}},6954:(e,t,r)=>{r.d(t,{z:()=>o});var a=r(67294);const n=new(r(11133).g0)("tab_id_channel");function o(){const[e,t]=(0,a.useState)();return(0,a.useEffect)((()=>{const r=()=>{const e=window.localStorage.getItem("last_tab_id"),r=String(e?Number.parseInt(e,10)+1:1);window.sessionStorage.setItem("tab_id",r),window.localStorage.setItem("last_tab_id",r),t(r)},a=window.sessionStorage.getItem("tab_id");a?(n.postMessage({type:"REQUESTING_TAB_ID",tabId:a}),t(a)):r(),n.onmessage=t=>{if(t.tabId===e)if("REQUESTING_TAB_ID"===t.type){const e={type:"TAB_ID_DENIED",tabId:t.tabId};n.postMessage(e)}else"TAB_ID_DENIED"===t.type&&r()}}),[e]),e}},56727:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(29306),n=r.n(a),o=r(21804),i=r.n(o),s=r(61988),l=r(72570);function d(e,t,r={},a=!1){return r=>{const o=a?document.querySelector(e):r.currentTarget.closest(e);return o?n().toJpeg(o,{quality:.95,bgcolor:"#F5F5F5",filter:e=>"string"!=typeof e.className||"mapboxgl-control-container"!==e.className&&!e.className.includes("ant-dropdown")}).then((e=>{const r=document.createElement("a");r.download=`${((e,t=new Date)=>`${i()(e)}-${t.toISOString().replace(/[: ]/g,"-")}`)(t)}.jpg`,r.href=e,r.click()})).catch((e=>{console.error("Creating image failed",e)})):(0,l.Dz)((0,s.t)("Image download failed, please refresh and try again."))}}}}]);