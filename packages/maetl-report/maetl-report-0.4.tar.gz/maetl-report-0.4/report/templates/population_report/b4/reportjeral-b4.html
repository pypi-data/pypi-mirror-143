{% extends 'main/layout.html' %} {% block title %}{{title}}{% endblock title %}
{% block content %} {% include 'report/sidebar.html' %}
<!-- block -->
{% load static %}
<section class="section-container">
<div class="content-wrapper">
  <div class="content-heading">
      <div>
        <h4>Dadus Rekapitulasaun Populasaun</h4>
        <small>Total rekapitulasaun populasaun iha kada Munisípiu, Postu No Suku </small>
      </div>
  </div>

  <div class="row">
    <div class="col-xl-6 block-center">
      <!-- START card-->
      <div class="card card-default">
        <div class="card-header">
          <center>
            <div>
              <h4>Hare Dadus Rekapitulasaun Populasaun Iha Teritoriu Timor-Laran</h4>
            
            </div>
          </center>
          <hr />
        </div>
        <div class="card-body">
          <form
            name="Form1"
            id="Form1"
            method="GET"
            target="_blank"
            data-posts-url=""
          >
            {% csrf_token %}

            <div class="row">


              
              <div class="col-md-12">
                <div class="form-group">
                  <label for="print"> Hili Tinan : </label>
                <select
                          required
                          name="tinan"
                          class="select form-control custom-select"
                          id="tinan"
                        >
                          {% for dados in tinan %}
                          <option value="{{dados.year}}">{{dados.year}}</option>
                          {% endfor %}
                        </select>
                
                </div>
              </div>



                <div class="col-md-12">
                <div class="form-group">
                  <label for="print"> Hili Fulan : </label>
                
                      <select
                          name="fulan"
                          class="select form-control custom-select"
                          id="tinan"
                        >
                          {% for dados in fulan %}
                          <option value="{{dados.id}}">{{dados.fulan}}</option>
                          {% endfor %}
                        </select>
                </div>
              </div>



                <div class="col-md-12">
                <div class="form-group">
                  <label for="print"> Hare dadus rekapitulasaun bazeia ba..?</label>
                  <select  name="print" id ="print" class="custom-select custom-select-sm" onchange="loadcolumn()">
                  <!--   <option  value="jeral" >Jeral</option> -->
                    <option  value="munisipiu" >Munisípiu no RAEOA</option>
                    <option value="postu" >Postu</option>
                    <option  value="suku" >Suku</option>
                  </select>
                
                </div>
              </div>


                      

                 
 
           
              

          
              <div class="col-md-12" id ='munisipiu'>
                <div class="form-group">
                  <hr>   
                  <label for="id_municipality">Munisípiu no RAEOA :</label>
                  <select  name="municipality" id="id_municipality" class="custom-select custom-select-sm">
                    <option selected="" value="">-----Hili Munisipiu------</option>
                    {% for m in munisipiu %}
                    <option value="{{m.id}}">{{m.name}}</option>
                    {% endfor %}
                  </select>
                  <font color='red' id = 'id_municipality_error'></font>
                </div>
              </div>

              

              <div class="col-md-12" id ='postu'>
                <div class="form-group">
                  <label for="id_administrativepost">Postu Administrativu :</label>
                  <select  name="administrativepost" id="id_administrativepost"  class="custom-select custom-select-sm">
                    <option value=''>-----Hili Postu------</option>
                  </select>
                  <font color='red' id = 'id_administrativepost_error'></font>
                </div>
              </div>
              
              <div class="col-md-12" id ='suku'>
                <div class="form-group">
                  <label for="id_village">Hili Suku :</label>
                  <select  name="village" id="id_village"  class="custom-select custom-select-sm">
                    <option selected="" value="" >-----Hili Suku----</option>
                 
                  </select>
                  <font color='red' id = 'id_village_error'></font>
                </div>
              </div>

                <div class="col-md-12 text-center">
                  <div class="form-group">
                    <button
                      class="btn btn-sm btn-labeled btn-info"
                      onclick="sumbmeteformulario();"
                      type="button"
                      title="Buka"
                    >
                      <span class="btn-label"><i class="fas fa-eye"></i></span
                      >Hare Dadus
                    </button>
                  </div>
                </div>




              </div>
           
          </form>



        </div>
      </div>
    </div>
  </div>
</div>




{% block scripts %}
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script>
  $("#id_municipality").change(function () {
    $("#id_village").html("");
  
    var municipalityId = $(this).val();
    console.log(municipalityId)
    $.ajax({
      url: "{% url 'custom:ajax_load_posts' %}",
      data: {
        'municipality': municipalityId
      },
      success: function (data) {
        $("#id_administrativepost").html(data);
      }

    });
  });




  $("#id_administrativepost").change(function () {
    var url = $("#locationForm").attr("data-posts-url");
    var postId = $(this).val();

    $.ajax({
      url: '{% url 'custom:ajax_load_villages' %}',
      data: {
        'post': postId
      },
      success: function (data) {
        $("#id_village").html(data);
      }
    });

  });



    function loadcolumn() {

  
      var print = document.getElementById("print").value;
      var munisipiu = document.getElementById("munisipiu");
      var postu = document.getElementById("postu");
      var suku = document.getElementById("suku");






      if (print == "jeral") {

        munisipiu.style.display = "none";
        postu.style.display = "none";
        suku.style.display = "none";


      } else if (print == "munisipiu") {
        munisipiu.style.display = "block";
        postu.style.display = "none";
        suku.style.display = "none";
      } else if (print == "postu") {
        munisipiu.style.display = "block";
        postu.style.display = "block";
        suku.style.display = "none";
      } else if (print == "suku") {

        munisipiu.style.display = "block";
        postu.style.display = "block";
        suku.style.display = "block";
      }


    }

    
    loadcolumn();

  
    function sumbmeteformulario(){

      var id_administrativepost = document.getElementById("id_administrativepost").value;
      var id_municipality = document.getElementById("id_municipality").value;
      var id_village = document.getElementById("id_village").value;

      var id_administrativepost_error = document.getElementById("id_administrativepost_error");
      var id_municipality_error = document.getElementById("id_municipality_error");
      var id_village_error = document.getElementById("id_village_error");
    
     
      var print = document.getElementById("print").value;

      
      if (print == "jeral") {

  
        document.Form1.action = "{% url 'report_population:reportb4jeral_print' %}"   
        document.Form1.target = "__blank";    
        document.Form1.submit();  
        
     
      } else if (print == "munisipiu") {
      
        var error = 'laiha';
     
        if(id_municipality == ''){
          id_municipality_error.innerHTML = "Favor Hili Munisipiu";
          error = 'iha'
        }
      
        if(error == 'iha'){
        

         
        }else{
 
          id_municipality_error.innerHTML = "";
          document.Form1.action = "{% url 'report_population:reportb4jeralmunisipiu_print' %}"   
          document.Form1.target = "__blank";    
          document.Form1.submit();  

        }


      } else if (print == "postu") {
    

        var error = 'laiha';
        if(id_administrativepost == ''){
          id_administrativepost_error.innerHTML = "Favor Hili Postu Administrativu";
          error = 'iha'
        }
        if(id_municipality == ''){
          id_municipality_error.innerHTML = "Favor Hili Munisipiu";
          error = 'iha'
        }
      
        if(error == 'iha'){
        
         
        }else{
          id_administrativepost_error.innerHTML = "";
          id_municipality_error.innerHTML = "";
          document.Form1.action = "{% url 'report_population:reportb4jeralpostu_print' %}";
          document.Form1.target = "__blank";    
          document.Form1.submit();  
        }



       
      } else if (print == "suku") {

        var error = 'laiha';
        if(id_administrativepost == ''){
          id_administrativepost_error.innerHTML = "Favor Hili Postu Administrativu";
          error = 'iha'
        }
        if(id_municipality == ''){
          error = 'iha'
          id_municipality_error.innerHTML = "Favor Hili Munisipiu";
        }
        if(id_village == ''){
          id_village_error.innerHTML = "Favor Hili Suku";
          error = 'iha'
        }
        if(error == 'iha'){
         
  

        }else{
          id_administrativepost_error.innerHTML = "";
          id_municipality_error.innerHTML = "";
          id_village_error.innerHTML = "";
          document.Form1.action = "{% url 'report_population:reportb4jeralsuku_print' %}";
          document.Form1.target = "__blank";    
          document.Form1.submit();  
        }

        
      }

    }



</script>
</section>

{% endblock scripts %}

{% include 'main/footer.html' %} 
 {% endblock content %}

