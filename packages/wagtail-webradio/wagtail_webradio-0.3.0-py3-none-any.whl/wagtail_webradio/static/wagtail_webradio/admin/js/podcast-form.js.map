{"version":3,"file":"podcast-form.js","sources":["../../../../static_src/admin/js/podcast-form.js"],"sourcesContent":["import $ from 'jquery';\n\nconst debounce = (callback, wait) => {\n  let timeoutId = null;\n\n  return (...args) => {\n    window.clearTimeout(timeoutId);\n    timeoutId = window.setTimeout(() => {\n      callback(...args);\n    }, wait);\n  };\n};\n\n/**\n * Format the time from seconds to HH:MM:SS.\n * @param {Number} seconds\n * @return {String}\n */\nconst formatDuration = (seconds) => {\n  return new Date(1000 * seconds).toISOString().substr(11, 8);\n};\n\n$(function () {\n  const urlInput = document.querySelector('input#id_sound_url');\n  const durationInput = document.querySelector('input#id_duration');\n  const isValidInput = document.querySelector('input#id_is_sound_url_valid');\n\n  // Create a new Audio object with the current sound_url value to validate it\n  // and set the duration value with the audio duration\n  const retrieve = debounce(() => {\n    isValidInput.value = '0';\n\n    if (!urlInput.value) {\n      durationInput.value = '';\n      return;\n    }\n\n    const audio = new Audio();\n    audio.preload = 'metadata';\n\n    audio.addEventListener('error', () => {\n      durationInput.value = '';\n    });\n    audio.addEventListener('loadedmetadata', () => {\n      isValidInput.value = '1';\n      durationInput.value =\n        audio.duration === Infinity ? '' : formatDuration(audio.duration);\n    });\n\n    audio.src = urlInput.value;\n  }, 500);\n\n  urlInput.addEventListener('input', retrieve);\n\n  // Check the current sound URL on page load\n  retrieve();\n});\n"],"names":["callback","wait","timeoutId","urlInput","document","querySelector","durationInput","isValidInput","retrieve","value","audio","Audio","preload","addEventListener","seconds","duration","Infinity","Date","toISOString","substr","src","args","window","clearTimeout","setTimeout"],"mappings":"gHAsBE,eApBgBA,EAAUC,EACtBC,EAoBEC,EAAWC,SAASC,cAAc,sBAClCC,EAAgBF,SAASC,cAAc,qBACvCE,EAAeH,SAASC,cAAc,+BAItCG,GA3BUR,EA2BU,cACxBO,EAAaE,MAAQ,IAEhBN,EAASM,WAKRC,EAAQ,IAAIC,MAClBD,EAAME,QAAU,WAEhBF,EAAMG,iBAAiB,SAAS,WAC9BP,EAAcG,MAAQ,MAExBC,EAAMG,iBAAiB,kBAAkB,WAzBtB,IAACC,EA0BlBP,EAAaE,MAAQ,IACrBH,EAAcG,MACZC,EAAMK,WAAaC,EAAAA,EAAW,IA5BdF,EA4BkCJ,EAAMK,SA3BvD,IAAIE,KAAK,IAAOH,GAASI,cAAcC,OAAO,GAAI,OA8BvDT,EAAMU,IAAMjB,EAASM,WAhBnBH,EAAcG,MAAQ,IA/BAR,EAgDvB,IA/CCC,EAAY,KAET,sCAAImB,2BAAAA,kBACTC,OAAOC,aAAarB,GACpBA,EAAYoB,OAAOE,YAAW,WAC5BxB,eAAYqB,KACXpB,KA2CLE,EAASU,iBAAiB,QAASL,GAGnCA"}