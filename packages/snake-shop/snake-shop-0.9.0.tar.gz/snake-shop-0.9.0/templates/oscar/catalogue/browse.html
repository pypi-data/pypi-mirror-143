{% extends "oscar/layout.html" %}

{% load basket_tags %}
{% load category_tags %}
{% load product_tags %}
{% load i18n %}

{% block title %}
    {% if summary %}{{ summary }} |{% endif %} {{ block.super }}
{% endblock %}

{% block headertext %}{{ summary }}{% endblock %}

{% block breadcrumbs %}
  <li class="breadcrumb-item active" aria-current="page">{{ summary }}</li>
{% endblock breadcrumbs %}

{% block content %}
  <div class="row">
    <div class="col my-auto d-none d-md-block">
      <span class="bold">
        Suchergebnisse: <span id="num_results">{{ num_products }}</span>
      </span>
    </div>
    <div class="col mt-auto d-md-none">
      <button class="btn btn-secondary position-relative" onclick="initializeSidebarForm();" type="button" data-toggle="collapse" data-target="#sidebarCollapse" aria-controls="sidebarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        Filter <i class="fas fa-angle-down ml-5"></i>
      </button>
    </div>
    <div class="col my-auto">
      <form method="get">
          {# Render other search params as hidden inputs #}
          {% for value in selected_facets %}
              <input type="hidden" name="selected_facets" value="{{ value }}" />
          {% endfor %}
          <input type="hidden" name="q" value="{{ search_form.q.value }}" />
  
          <div class="float-right">
            <form method="get">
              <label for="id_sort_by" class="condensed">
                Sortieren
              </label>
              {{order_form.sort_by}}
            </form>
          </div>
      </form>
    </div>
  </div>

  {% if products or True %}
      <section class="row no-gutters">
        <div class="col-12 col-md-4 col-lg-3 mr-5 d-none d-md-block">
          <div id="sidebar" class="row pt-3 w-100 mx-auto sticky-top scrollbar-hidden" style="z-index:unset;overflow-y:scroll;max-height: 100vh;-webkit-overflow-scrolling:touch;">
            {% include 'oscar/catalogue/partials/browse_sidebar.html' %}
          </div>
        </div>
        <div class="col">
          <ol id="products" class="row pt-3 list-unstyled">
            {% include 'oscar/catalogue/partials/browse_products.html' %}
          </ol>
        </div>
      </section>
  {% else %}
      <p class="nonefound">{% trans "No products found." %}</p>
  {% endif %}
{% endblock content %}

{% block onbodyload %}
    {{ block.super }}
{% endblock %}
