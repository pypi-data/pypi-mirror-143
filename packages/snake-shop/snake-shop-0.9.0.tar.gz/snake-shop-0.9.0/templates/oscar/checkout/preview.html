{% extends "oscar/checkout/checkout.html" %}
{% load i18n %}

{% block title %}
    {% trans "Order preview" %} | {{ block.super }}
{% endblock %}

{% block checkout_nav %}
    {% include 'oscar/checkout/nav.html' with step=4 %}
{% endblock %}

{% block checkout_title %}
    {% trans "Preview order" %}
{% endblock %}

{% block place_order %}
  <div class="col-12 col-md-6 offset-md-6 order-3">
    <form method="post" action="{% url 'checkout:preview' %}" id="place_order_form">{% csrf_token %}
        <h3>
          {{ order_note_form.fields.note.label }}:
        </h3>
        {{ order_note_form.note }}<br />
        <b>{{ order_note_form.withdrawal_declaration_accepted }} {{ order_note_form.fields.withdrawal_declaration_accepted.label }}</b><br />
        <b>{{ order_note_form.conditions_accepted }} {{ order_note_form.fields.conditions_accepted.label }}</b><br />
        {% if order_note_form.fields.newsletter_accepted %}
          {{ order_note_form.newsletter_accepted }} Optional: {{ order_note_form.fields.newsletter_accepted.label }}<br />
        {% endif %}
        <input type="hidden" name="action" value="place_order" />
        {% comment %}
            When submitting sensitive data on the payment details page (eg a bankcard)
            we don't want to save the data and so we pass the bound form to the preview
            template and render it in a hidden div.  Then the payment information will
            get re-submitted when the user confirms the order.
        {% endcomment %}
        <div style="display:none">
            {% block hiddenforms %}{% endblock %}
        </div>

        <div class="form-group clearfix">
           <button id='place-order' class="btn btn-primary btn-lg btn-block" onclick="if(this.form.checkValidity()){this.form.submit();this.disabled=true;}">
              {% if request.user.hide_price %}Verbindlich bestellen{% else %}{% trans "Place order" %}{% endif %}
           </button>
        </div>
    </form>
  </div>
{% endblock place_order %}
